<!DOCTYPE html>
<!--[if lt IE 7]>      
<html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         
<html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         
<html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Discover</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/style-4.css">
    <script src="js/modernizr-2.6.2.min.js"></script>
</head>

<body class="desktop">

<div id="page" class="homepage">
	<nav>
		<div class="main-nav">
			<div class="flex clear">
				<h1 class="logo">Discover</h1>
				<div class="links">
					<div class="card">
						<h2>Credit Cards</h2>
					</div>
					<div class="banking">
						<h2>Bank</h2>
					</div>
					<div class="loans">
						<h2>Loans</h2>
					</div>
					<div class="login">
						<h2>Account</h2>
					</div>
				</div>
				
				<input type="text" class="search" placeholder="Search" />
				<a class="icon search-icon" href="#">&#128269;</a>
				<div class="menu">
					<h2>Menu</h2>
				</div>
			</div>
		</div>
	</nav>
	<section id="hero" class="hero">
		<div class="content">
			<div class="media content-1 active">
				<video id="vid-1" class="content-1-vid display" autoplay loop>
					<source src="video/coffeeshop-it-card-2.mp4" type="video/mp4">
				</video>
				<div class="copy clear">
					<div class="logo clear">
						<img class="logo-white" src="images/discover-logo-4c-white.svg" />
					</div>
					<div class="headline">
						<h3><span>it</span> Card</h3>
						<p>Rewards that just keep adding up.</p>
					</div>
					<a href="#" class="cta">Learn More</a>
				</div>
			</div>
			<div class="media content-2">
				<video id="vid-3" class="content-1-vid display" autoplay loop>
					<source src="video/bank-vid.mp4" type="video/mp4">
				</video>
				<div class="copy">
					<div class="logo">
						<img class="logo-white" src="images/discover-logo-4c-white.svg" />
					</div>
					<div class="headline">
						<h3>Bank</h3>
						<p>Bank with ease anytime, anywhere.</p>
					</div>
					<a href="#" class="cta">Learn More</a>
				</div>
			</div>
			<div class="media content-3">
				<div class="image display"></div>
				<div class="copy">
					<div class="logo">
						<img class="logo-white" src="images/discover-logo-4c-white.svg" />
					</div>
					<div class="headline">
						<h3>Loans</h3>
						<p>Not all student loans are created equal.</p>
					</div>
					<a href="#" class="cta">Sign Up Now</a>
				</div>
			</div>
			<div class="media content-4">
				<div class="image display"></div>
				<div class="copy">
					<div class="logo">
						<img class="logo-white" src="images/discover-logo-4c-white.svg" />
					</div>
					<div class="headline">
						<h3>Deals</h3>
						<p>Earn up to 15% <em>Cashback</em> on popular retailers.</p>
					</div>
					<a href="#" class="cta">Start Shopping</a>
				</div>
			</div>
			<div class="media content-5">
				<div class="image display"></div>
				<img class="puck animated" src="images/puck-2.png" />
				<div class="copy">
					<div class="logo">
						<img class="logo-white" src="images/discover-logo-4c-white.svg" />
					</div>
					<div class="headline">
						<h3>Freeze</h3>
						<p>Freeze your card at any time to avoid fraudulant spending.</p>
					</div>
					<a href="#" class="cta">Learn More</a>
				</div>
			</div>
		</div>
		
	</section>
	<div class="hero-links">
		<div>
			<a class="card content-1 active" href="#">Credit Cards</a>
			<a class="banking content-2" href="#">Bank</a>
			<a class="loans content-3" href="#">Loans</a>
			<a class="rewards content-4" href="#">Rewards</a>
			<a class="feature content-5" href="#">What's New</a>
		</div>
	</div>
	<section id="sub-content" class="sub-content">
		<div class="two-box content-1">
			<div class="box-1">
				<div class="container">
					<div>
						<div class="credit active">
							<div class="overlay"></div>
							<div class="copy">
								<h4>You're never responsible for unauthorized purchases on your Discover card.</h4>
							</div>
							<a class="cta" href="#">Learn More</a>
						</div>
						<div class="bank">
							<div class="overlay"></div>
							<div class="copy">
								<h4>Earn 5X the National Savings Average.</h4>
							</div>
							<a class="cta" href="#">Learn More</a>
						</div>
					</div>
				</div>
			</div>
			<div class="box-2">
				<div class="container">
					<div>
						<div class="credit active"></div>
						<div class="bank"></div>
					</div>
				</div>
			</div>
		</div>
		<div class="main-box">
			<div class="container">
				<div>
					<div class="credit active">
						<h3 class="miles-header">Miles beyond Miles.</h3>
						<img class="miles-card" src="images/miles-card.png" />
						<div class="copy">
							<div class="logo">
								<img class="logo-white" src="images/discover-logo-4c-white.svg" />
							</div>
							<div class="headline">
								<h3><span>it</span> Miles Card</h3>
								<p>Earn 1.5 miles for every dollar spent</p>
							</div>
							<a href="#" class="cta">Learn More</a>
						</div>
					</div>
					<div class="bank">
						<div class="copy">
							<div class="logo">
								<img class="logo-white" src="images/discover-logo-4c-white.svg" />
							</div>
							<div class="headline">
								<h3>Cashback Checking</h3>
								<p> Free checking, no monthly fees, plus cash back on everyday transactions.</p>
							</div>
							<a href="#" class="cta">Learn More</a>
						</div>
					</div>
				</div>
				
			</div>
		</div>
		<div class="two-box content-2">
			<div class="box-1">
				<div class="container">
					<div>
						<div class="credit active"></div>
						<div class="bank"></div>
					</div>
				</div>
			</div>
			<div class="box-2">
				<div class="container">
					<div>
						<div class="credit active">
							<div class="overlay"></div>
							<div class="copy">
								<h4>Free FICO Credit Score online and mobile.</h4>
							</div>
							<a class="cta" href="#">Learn More</a>
						</div>
						<div class="bank">
							<div class="overlay"></div>
							<div class="copy">
								<h4>Bank with ease anytime, anywhere.</h4>
							</div>
							<a class="cta" href="#">Learn More</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
	
	<section id="footer" class="footer">
		<img src="images/footer.jpg" />
	</section>
	
	<section class="nav-overlays">
		<div class="card">
<!--			<div class="header">
				<h2>Credit Cards</h2>
			</div>-->
			<div class="feature">
				<div class="container">
					<div>
						<div class="header clear">
							<video id="vid-2" class="card-2-vid" autoplay loop>
								<source src="video/card-vid-3.mp4" type="video/mp4">
							</video>
						</div>
						<div class="content">
							<div class="logo">
								<img class="logo-white" src="images/discover-logo-4c-white.svg" />
							</div>
							<h3>it Card</h3>
							<div class="copy">
								<img class="it-card" src="images/it-card-left-2.png" />
							</div>
							<a class="cta" href="#">Learn More</a>
						</div>
					</div>
				</div>
			</div>
			<div class="secondary">
				<div class="box-1">
					<div class="container">
						<div>
							<div class="content">
								<div class="copy">
									<h3>Shop. Buy. Enjoy.</h3>
									<p>Activate to get 5% Cashback Bonus on up to $1,500 in Online Shopping and Department Store purchases from now through December 2014.</p>
								</div>
								<a class="cta" href="#">Activate Now</a>
							</div>
						</div>
					</div>
				</div>
				<div class="box-2">
					<div class="container">
						<div>
							<div class="content">
								<div class="copy">
									<h3>Get More &amp; Spend Less at Amazon.com</h3>
									<p>Pay with your <em>Cashback Bonus</em> at checkout.</p>
								</div>
								<a class="cta" href="#">Redeem Now</a>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="tertiary">
				<div class="box-1">
					<div class="container">
						<div>
							<img class="card-art" src="images/miles-card-green.png" />
							<div class="copy">
								<div class="logo">
									<img class="logo-white" src="images/discover-logo-4c-white.svg" />
								</div>
								<h3>it Miles Card</h3>
								<a class="cta" href="#">Learn More</a>
							</div>
						</div>
					</div>
				</div>
				<div class="box-2">
					<div class="container">
						<div>
							<img class="card-art" src="images/card-art-flower.png" />
							<div class="copy">
								<div class="logo">
									<img class="logo-white" src="images/discover-logo-4c-white.svg" />
								</div>
								<h3>it Student Card</h3>
								<a class="cta" href="#">Learn More</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="banking"></div>
		<div class="loans"></div>
		<div class="login"></div>
	</section>
	
</div>            

<script src="js/jquery-1.11.1.min.js"></script>
<script src="js/TweenMax.min.js"></script>
<script src="js/ScrollToPlugin.min.js"></script>
<script src="js/TextPlugin.min.js"></script>
<script src="js/enquire.min.js"></script>
<script src="js/jquery.scrollmagic.min.js"></script>

<script>
	$(document).ready(function() {
		
		var controller;
		controller = new ScrollMagic();
		
		initializeScrollAnim();
		
//		Cache Variables
		
		var search = $(".search"),
			menu = $(".menu")
			;
		
		//		Close the Menu - Global Function
				
				function closeMenu() {
					if (menu.hasClass('active')) {
						TweenMax.fromTo($('.links'), .5, {autoAlpha:1, display:"block"}, {autoAlpha:0, display:"none", onComplete:menuRemoveActive});
					}
				}
				
		//		Remove Menu Class - Global Function
				
				function menuRemoveActive() {
					menu.removeClass('active');
				}
				
		//		Show Links - Global Function
		
				function showLinks() {
					TweenMax.to($('.links'), .5, {autoAlpha:1, display:"block"});
				}
				
//		Media Query help

		enquire.register("(max-width : 640px)", {
		    match : function() {
		        $('body').addClass('mobile').removeClass('desktop');
		        TweenMax.to($('.links'), 0, {autoAlpha:0, display:"none", onComplete:menuRemoveActive});
		        TweenMax.to($('.media.active .copy, .media.active'), 0, {clearProps:"all"});
		    },  
		    unmatch : function() {
		        $('body').addClass('desktop').removeClass('mobile');
		        TweenMax.to($('.links'), 0, {autoAlpha:1, display:"block"});
		        TweenMax.to($('.media.active .copy, .media.active'), 0, {clearProps:"all"});
		    }
		});
		
//		Control the Videos
		
		var vid1 = document.getElementById('vid-1');
		var vid2 = document.getElementById('vid-2');
		var vid3 = document.getElementById('vid-3');
		
		vid2.pause(); // pause video
		$(vid2).prop('muted',true); // mute video
		
		$("#vid-2").click(function() {
//			$(vid2).prop('muted',false);
			vid2.pause();
		});

//		Animate and Toggle through Hero Sections
				
		$(document).on('touchend, click', '.hero-links a', function(){
			
			event.preventDefault();
			
			var index = $(this).index();
			var heroSlide = $('.hero .content').children(':eq(' + index + ')');
			
			CSSPlugin.defaultTransformPerspective = 200;
			
			function heroSlideOut() {
				TweenMax.to($('.hero .media.active .copy'), .35, {ease:Power0.easeNone, onComplete:addClass});
//				TweenMax.to($('.hero .media.active .display'), .35, {autoAlpha:0, ease:Power0.easeNone});
			}
			function heroSlideIn() {
				TweenMax.fromTo($('.desktop .hero .media:nth-child(2n+1).active .copy'), .35, {autoAlpha:0, right:"-=200px"}, {autoAlpha:1, right:"+=200px"});
				TweenMax.fromTo($('.desktop .hero .media:nth-child(2n).active .copy'), .35, {autoAlpha:0, left:"-=200px"}, {autoAlpha:1, left:"+=200px"});
				TweenMax.fromTo($('.desktop .hero .media.active .display'), .35, {autoAlpha:0}, {autoAlpha:1, ease:Power0.easeNone});
			}
			
			if (!$(this).hasClass('active')) {
				$(this).addClass('active').siblings().removeClass('active');
				heroSlideOut();
			}
			function addClass(){
				heroSlide.addClass('active').siblings().removeClass('active');
				heroSlideIn();
				TweenMax.to($('.media.active .copy, .media.active'), 0, {clearProps:"all"});
				initializeScrollAnim();
			}
			
			if ($(this).hasClass('content-5')) {
				TweenMax.fromTo($('.media.content-5 .image'), 3, {backgroundPosition:'bottom'}, {backgroundPosition:'top'});
				TweenMax.fromTo($('.media.content-5 .puck'), 3.5, {top:"35rem", rotation:"0"}, {top:"-35rem", rotation:"360_cw", delay:1.5, ease:Power1.easeOut});
			}
			
			if ($(this).hasClass('content-1')) {
				vid1.play();
//				alert('content 1 clicked');
				$(".sub-content .credit").addClass('active').siblings().removeClass('active');
			}
			else {
				vid1.pause();
			}
			if ($(this).hasClass('content-2')) {
				vid3.play();
//				alert('content-2 clicked');
				$(".sub-content .bank").addClass('active').siblings().removeClass('active');
			}
			else {
				vid3.pause();
			}
			
						
		});
		
//		Animate and Toggle through the Overlays
		
		$(document).on('touchend, click', '.links > div', function(){
			var index = $(this).index();
			var overlay = $('.nav-overlays').children(':eq(' + index + ')');
			
			$('body').addClass('scroll');
			
			CSSPlugin.defaultTransformPerspective = 200;
			
			function overlayOut() {
				TweenMax.to($('.nav-overlays > div.active'), .25, {autoAlpha:0, onComplete:addClass});
			}
			function overlayIn() {
				TweenMax.fromTo($('.nav-overlays > div.active'), .35, {autoAlpha:0, top:"+=400px", scale:1, transformOrigin:"center center"}, {autoAlpha:1, top:"-=400px", scale:1, ease:Power0.easeNone});
				TweenMax.staggerFromTo($('.nav-overlays > div > div > div'), .5, {autoAlpha:1, top:"+=400px", ease:Power4.easeInOut, delay:.05}, {autoAlpha:1, top:"-=400px"}, .05);
			}
			
			if (!$(this).hasClass('active')) {
				$(this).addClass('active').siblings('.active').removeClass('active');
				overlayOut();
			}
			function addClass(){
				overlay.addClass('active').siblings('.active').removeClass('active');
				overlayIn();
			}
			
			if (index === 0) {
				vid2.play();
			}
			else {
				vid2.pause();
			}
			
			closeMenu();
						
			$('.nav-overlays').addClass('active');
						
		});
		
//		Remove all overlays and menus on Logo click
		
		$(document).on('touchend, click', '.main-nav .logo', function(){
			
			overlayOut();
				
			closeMenu();
							
			function overlayOut() {
				TweenMax.to($('.nav-overlays > div.active'), .35, {autoAlpha:0, onComplete:removeClass});
			}
			
			function removeClass() {
				$('.nav-overlays, .nav-overlays > div, .links > div').removeClass('active');
			}
			
			$('body').removeClass('scroll');
						
		});
		
//		Mobile Functionality
		
//		Toggle search field
		
	 	$(document).on('touchend, click', '.search-icon', function(){
			search.toggleClass('active');
		});
		
//		Animate mobile menu overlay
		
		$(document).on('touchend, click', '.menu', function(){		
			
			if (!$(this).hasClass('active')) {
				TweenMax.fromTo($('.links'), .5, {autoAlpha:0, display:"none"}, {autoAlpha:1, display:"block"});
				TweenMax.staggerFromTo($('.links > div'), .5, {top:"+=200px"}, {top:"-=200px"}, .1);
			}
			
			$(this).addClass('active');
			
		});
		
		$(document).on('touchend, click', '.menu.active', function(){
			closeMenu();
		});
		
		function initializeScrollAnim() {
		
			var headerOneParallaxTween = new TimelineMax()
				.add(
					TweenMax.fromTo(".media.active .copy",1, {bottom:"3.5rem", autoAlpha:1, ease: Linear.easeNone}, {bottom:"12.5rem", autoAlpha:1})
				);
			
			var headerOneParallaxScene = new ScrollScene({
				triggerHook:0,
				offset: 0,
				duration:1000,
				})
				.setTween(headerOneParallaxTween)
				.addTo(controller);
			
			var headerTwoParallaxTween = new TimelineMax()
				.add(
					TweenMax.fromTo(".media.active",1, {top:"-=0", autoAlpha:1, ease: Linear.easeNone}, {top:"-150px", autoAlpha:0})
				);
			
			var headerOneParallaxScene = new ScrollScene({
				triggerHook:0,
				offset: 0,
				duration:1000,
				})
				.setTween(headerTwoParallaxTween)
				.addTo(controller);
		}
		
		
	});
</script>

</body>
</html>
