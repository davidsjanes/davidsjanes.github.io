!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.EQCSS=t()}(this,function(){function l(e){console.log(e)}var EQCSS={data:[]};EQCSS.load=function(){for(var e=document.querySelectorAll("style"),t=0;t<e.length;t++)null===e[t].getAttribute("data-eqcss-read")&&(e[t].setAttribute("data-eqcss-read","true"),EQCSS.parse(e[t].innerHTML),EQCSS.apply());e=document.querySelectorAll("script");for(t=0;t<e.length;t++)null===e[t].getAttribute("data-eqcss-read")&&"text/eqcss"===e[t].getAttribute("type")&&(e[t].src?function(){var n=new XMLHttpRequest;n.open("GET",e[t].src,!0),n.send(null),n.onload=function(){EQCSS.parse(n.responseText),EQCSS.apply()}}():(EQCSS.parse(e[t].innerHTML),EQCSS.apply()),e[t].setAttribute("data-eqcss-read","true"));for(e=document.querySelectorAll("link"),t=0;t<e.length;t++)null===e[t].getAttribute("data-eqcss-read")&&"stylesheet"===e[t].getAttribute("rel")&&(e[t].href&&function(){var n=new XMLHttpRequest;n.open("GET",e[t].href,!0),n.send(null),n.onload=function(){EQCSS.parse(n.responseText),EQCSS.apply()}}(),e[t].setAttribute("data-eqcss-read","true"))},EQCSS.parse=function(e){(e=(e=(e=(e=e.replace(/\s+/g," ")).replace(/\/\*[\w\W]*?\*\//g,"")).replace(/@element/g,"\n@element")).replace(/(@element.*?\{([^}]*?\{[^}]*?\}[^}]*?)*\}).*/g,"$1")).replace(/(@element.*(?!@element))/g,function(e,t){var n={};t.replace(/(@element)\s*(".*?"|'.*?'|.*?)\s*(and\s*\(|{)/g,function(e,t,a,i){a=(a=a.replace(/^\s?['](.*)[']/,"$1")).replace(/^\s?["](.*)["]/,"$1"),n.selector=a}),n.conditions=[],t.replace(/and ?\( ?([^:]*) ?: ?([^)]*) ?\)/g,function(e,t,a){var i=null;(i=a.replace(/^(\d*\.?\d+)(\D+)$/,"$2"))===a&&(i=null),a=a.replace(/^(\d*\.?\d+)\D+$/,"$1"),n.conditions.push({measure:t,value:a,unit:i})}),t.replace(/{(.*)}/g,function(e,t){n.style=t}),EQCSS.data.push(n)})},EQCSS.apply=function(){var e,t,n,a,i,o,r,d,l,s,c,u,S,p,h,E;for(e=0;e<EQCSS.data.length;e++)for(a=document.querySelectorAll(EQCSS.data[e].selector),t=0;t<a.length;t++){i="data-eqcss-"+e+"-"+t,a[t].setAttribute(i,""),r="data-eqcss-"+e+"-"+t+"-parent",a[t]!=document.documentElement&&a[t].parentNode.setAttribute(r,""),d="data-eqcss-"+e+"-"+t+"-prev",a[t].previousElementSibling&&a[t].previousElementSibling.setAttribute(d,""),l="data-eqcss-"+e+"-"+t+"-next",a[t].nextElementSibling&&a[t].nextElementSibling.setAttribute(l,""),(o=document.querySelector("#"+i))||((o=document.createElement("style")).id=i,o.setAttribute("data-eqcss-read","true"),document.querySelector("head").appendChild(o)),o=document.querySelector("#"+i),p=!0;e:for(n=0;n<EQCSS.data[e].conditions.length;n++){h=window.getComputedStyle(a[t],null),E=null,a[t]!=document.documentElement&&(E=window.getComputedStyle(a[t].parentNode,null));var f=!1;if("vw"===EQCSS.data[e].conditions[n].unit){f=!0;var m=parseInt(EQCSS.data[e].conditions[n].value);EQCSS.data[e].conditions[n].recomputed_value=m*window.innerWidth/100}else if("vh"===EQCSS.data[e].conditions[n].unit){f=!0;m=parseInt(EQCSS.data[e].conditions[n].value);EQCSS.data[e].conditions[n].recomputed_value=m*window.innerHeight/100}else if("vmin"===EQCSS.data[e].conditions[n].unit){f=!0;m=parseInt(EQCSS.data[e].conditions[n].value);EQCSS.data[e].conditions[n].recomputed_value=m*Math.min(window.innerWidth,window.innerHeight)/100}else if("vmax"===EQCSS.data[e].conditions[n].unit){f=!0;m=parseInt(EQCSS.data[e].conditions[n].value);EQCSS.data[e].conditions[n].recomputed_value=m*Math.max(window.innerWidth,window.innerHeight)/100}else if(null!=EQCSS.data[e].conditions[n].unit&&"px"!=EQCSS.data[e].conditions[n].unit&&"%"!=EQCSS.data[e].conditions[n].unit){var C=document.createElement("div");C.style.visibility="hidden",C.style.border="1px solid red",C.style.width=EQCSS.data[e].conditions[n].value+EQCSS.data[e].conditions[n].unit;var g=a[t];a[t]!=document.documentElement&&(g=a[t].parentNode),g.appendChild(C),EQCSS.data[e].conditions[n].value=parseInt(window.getComputedStyle(C,null).getPropertyValue("width")),EQCSS.data[e].conditions[n].unit="px",g.removeChild(C)}var Q=f?EQCSS.data[e].conditions[n].recomputed_value:parseInt(EQCSS.data[e].conditions[n].value);switch(EQCSS.data[e].conditions[n].measure){case"min-width":if(!(!0!==f&&"px"!==EQCSS.data[e].conditions[n].unit||(c=parseInt(h.getPropertyValue("width")))>=Q)){p=!1;break e}if("%"===EQCSS.data[e].conditions[n].unit&&(c=parseInt(h.getPropertyValue("width")),!(parseInt(E.getPropertyValue("width"))/c<=100/Q))){p=!1;break e}break;case"max-width":if(!(!0!==f&&"px"!==EQCSS.data[e].conditions[n].unit||(c=parseInt(h.getPropertyValue("width")))<=Q)){p=!1;break e}if("%"===EQCSS.data[e].conditions[n].unit&&(c=parseInt(h.getPropertyValue("width")),!(parseInt(E.getPropertyValue("width"))/c>=100/Q))){p=!1;break e}break;case"min-height":if(!(!0!==f&&"px"!==EQCSS.data[e].conditions[n].unit||(u=parseInt(h.getPropertyValue("height")))>=Q)){p=!1;break e}if("%"===EQCSS.data[e].conditions[n].unit&&(u=parseInt(h.getPropertyValue("height")),!(parseInt(E.getPropertyValue("height"))/u<=100/Q))){p=!1;break e}break;case"max-height":if(!(!0!==f&&"px"!==EQCSS.data[e].conditions[n].unit||(u=parseInt(h.getPropertyValue("height")))<=Q)){p=!1;break e}if("%"===EQCSS.data[e].conditions[n].unit&&(u=parseInt(h.getPropertyValue("height")),!(parseInt(E.getPropertyValue("height"))/u>=100/Q))){p=!1;break e}break;case"min-scroll-x":var w=(b=a[t]).scrollLeft;if(b.hasScrollListener||(b===document.documentElement||b===document.body?window.addEventListener("scroll",function(){EQCSS.throttle(),b.hasScrollListener=!0}):b.addEventListener("scroll",function(){EQCSS.throttle(),b.hasScrollListener=!0})),!0===f||"px"===EQCSS.data[e].conditions[n].unit){if(!(w>=Q)){p=!1;break e}}else if("%"===EQCSS.data[e].conditions[n].unit){var y=a[t].scrollWidth;if(v=a[t]===document.documentElement||a[t]===document.body?window.innerWidth:parseInt(h.getPropertyValue("width")),!(w/(y-v)*100>=Q)){p=!1;break e}}break;case"min-scroll-y":var b=a[t];if(w=a[t].scrollTop,b.hasScrollListener||(b===document.documentElement||b===document.body?window.addEventListener("scroll",function(){EQCSS.throttle(),b.hasScrollListener=!0}):b.addEventListener("scroll",function(){EQCSS.throttle(),b.hasScrollListener=!0})),!0===f||"px"===EQCSS.data[e].conditions[n].unit){if(!(w>=Q)){p=!1;break e}}else if("%"===EQCSS.data[e].conditions[n].unit){y=a[t].scrollHeight;if(v=a[t]===document.documentElement||a[t]===document.body?window.innerHeight:parseInt(h.getPropertyValue("height")),!(w/(y-v)*100>=Q)){p=!1;break e}}break;case"max-scroll-x":b=a[t];if(w=a[t].scrollLeft,b.hasScrollListener||(b===document.documentElement||b===document.body?window.addEventListener("scroll",function(){EQCSS.throttle(),b.hasScrollListener=!0}):b.addEventListener("scroll",function(){EQCSS.throttle(),b.hasScrollListener=!0})),!0===f||"px"===EQCSS.data[e].conditions[n].unit){if(!(w<=Q)){p=!1;break e}}else if("%"===EQCSS.data[e].conditions[n].unit){y=a[t].scrollWidth;if(v=a[t]===document.documentElement||a[t]===document.body?window.innerWidth:parseInt(h.getPropertyValue("width")),!(w/(y-v)*100<=Q)){p=!1;break e}}break;case"max-scroll-y":b=a[t];if(w=a[t].scrollTop,b.hasScrollListener||(b===document.documentElement||b===document.body?window.addEventListener("scroll",function(){EQCSS.throttle(),b.hasScrollListener=!0}):b.addEventListener("scroll",function(){EQCSS.throttle(),b.hasScrollListener=!0})),!0===f||"px"===EQCSS.data[e].conditions[n].unit){if(!(w<=Q)){p=!1;break e}}else if("%"===EQCSS.data[e].conditions[n].unit){var v;y=a[t].scrollHeight;if(v=a[t]===document.documentElement||a[t]===document.body?window.innerHeight:parseInt(h.getPropertyValue("height")),!(w/(y-v)*100<=Q)){p=!1;break e}}break;case"min-characters":if(a[t].value){if(!(a[t].value.length>=Q)){p=!1;break e}}else if(!(a[t].textContent.length>=Q)){p=!1;break e}break;case"max-characters":if(a[t].value){if(!(a[t].value.length<=Q)){p=!1;break e}}else if(!(a[t].textContent.length<=Q)){p=!1;break e}break;case"min-children":if(!(a[t].children.length>=Q)){p=!1;break e}break;case"max-children":if(!(a[t].children.length<=Q)){p=!1;break e}break;case"min-lines":if(u=parseInt(h.getPropertyValue("height"))-parseInt(h.getPropertyValue("border-top-width"))-parseInt(h.getPropertyValue("border-bottom-width"))-parseInt(h.getPropertyValue("padding-top"))-parseInt(h.getPropertyValue("padding-bottom")),S=parseInt(h.getPropertyValue("line-height")),!(u/S>=Q)){p=!1;break e}break;case"max-lines":if(u=parseInt(h.getPropertyValue("height"))-parseInt(h.getPropertyValue("border-top-width"))-parseInt(h.getPropertyValue("border-bottom-width"))-parseInt(h.getPropertyValue("padding-top"))-parseInt(h.getPropertyValue("padding-bottom")),S=parseInt(h.getPropertyValue("line-height")),!(u/S+1<=Q)){p=!1;break e}break;case"orientation":if("square"===EQCSS.data[e].conditions[n].value&&a[t].offsetWidth!==a[t].offsetHeight){p=!1;break e}if("portrait"===EQCSS.data[e].conditions[n].value&&!(a[t].offsetWidth<a[t].offsetHeight)){p=!1;break e}if("landscape"===EQCSS.data[e].conditions[n].value&&!(a[t].offsetHeight<a[t].offsetWidth)){p=!1;break e}break;case"min-aspect-ratio":if(!((k=EQCSS.data[e].conditions[n].value.split("/")[0])/(x=EQCSS.data[e].conditions[n].value.split("/")[1])<=a[t].offsetWidth/a[t].offsetHeight)){p=!1;break e}break;case"max-aspect-ratio":var k=EQCSS.data[e].conditions[n].value.split("/")[0],x=EQCSS.data[e].conditions[n].value.split("/")[1];if(!(a[t].offsetWidth/a[t].offsetHeight<=k/x)){p=!1;break e}}}if(!0===p){s=(s=(s=(s=(s=(s=(s=(s=EQCSS.data[e].style).replace(/eval\( *((".*?")|('.*?')) *\)/g,function(e,n){return EQCSS.tryWithEval(a[t],n)})).replace(/(\$|eq_)this/gi,"["+i+"]")).replace(/(\$|eq_)parent/gi,"["+r+"]")).replace(/(\$|eq_)prev/gi,"["+d+"]")).replace(/(\$|eq_)next/gi,"["+l+"]")).replace(/(\$|eq_)root/gi,"html")).replace(/(\d*\.?\d+)(?:\s*)(ew|eh|emin|emax)/gi,function(e,n,i){switch(i){case"ew":return a[t].offsetWidth/100*n+"px";case"eh":return a[t].offsetHeight/100*n+"px";case"emin":return Math.min(a[t].offsetWidth,a[t].offsetHeight)/100*n+"px";case"emax":return Math.max(a[t].offsetWidth,a[t].offsetHeight)/100*n+"px"}});try{o.innerHTML=s}catch(e){o.styleSheet.cssText=s}}else try{o.innerHTML=""}catch(e){o.styleSheet.cssText=""}}},EQCSS.tryWithEval=function(element,string){var $it=element,ret="";try{with($it)ret=eval(string.slice(1,-1))}catch(e){ret=""}return ret},EQCSS.domReady=function(e){var t=!1,n=!0,a=window.document,i=a.documentElement,o=!~navigator.userAgent.indexOf("MSIE 8"),r=o?"addEventListener":"attachEvent",d=o?"removeEventListener":"detachEvent",l=o?"":"on",s=function(n){"readystatechange"==n.type&&"complete"!=a.readyState||(("load"==n.type?window:a)[d](l+n.type,s,!1),!t&&(t=!0)&&e.call(window,n.type||n))},c=function(){try{i.doScroll("left")}catch(e){return void setTimeout(c,50)}s("poll")};if("complete"==a.readyState)e.call(window,"lazy");else{if(!o&&i.doScroll){try{n=!window.frameElement}catch(e){}n&&c()}a[r](l+"DOMContentLoaded",s,!1),a[r](l+"readystatechange",s,!1),window[r](l+"load",s,!1)}};var EQCSS_throttle_available=!0,EQCSS_throttle_queued=!1,EQCSS_mouse_down=!1,EQCSS_timeout=200;return EQCSS.throttle=function(){EQCSS_throttle_available?(EQCSS.apply(),EQCSS_throttle_available=!1,setTimeout(function(){EQCSS_throttle_available=!0,EQCSS_throttle_queued&&(EQCSS_throttle_queued=!1,EQCSS.apply())},EQCSS_timeout)):EQCSS_throttle_queued=!0},EQCSS.domReady(function(){EQCSS.load(),EQCSS.throttle()}),window.addEventListener("resize",EQCSS.throttle),window.addEventListener("input",EQCSS.throttle),window.addEventListener("click",EQCSS.throttle),window.addEventListener("mousedown",function(){EQCSS_mouse_down=!0}),window.addEventListener("mouseup",function(){EQCSS_mouse_down=!1,EQCSS.throttle()}),window.addEventListener("mousemove",function(){EQCSS_mouse_down&&EQCSS.throttle()}),EQCSS});